<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Bootstrap 101 Template</title>
  <style type="text/css">
    .outSide{margin-top:15px;}
  </style>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>

</head>
<body>
<div class="container outSide">
  <div class="row">
    <div class="col-md-3 col-md-offset-1">
      <input type="button" class="btn btn-default btn-primary btn-myBtn" value="登陆/注册" data-toggle="modal" data-target=".abc">
      <p class="namesNode hide">欢迎回来<span></span></p>
    </div>
  </div>
</div>


<div class="modal fade abc" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">注册登陆框</h4>
      </div>
      <div class="modal-body myForm">
        <div class="form-group">
          <label>用户名:</label>
          <input type="text" name="" class="form-control userNode">
        </div>
        <div class="form-group">
          <label>密码:</label>
          <input type="password" name="" class="form-control passNode">
        </div>
        <input type="button" name="" value="登陆" class="btn btn-default btn-primary btn-loginNode">
        <input type="button" name="" value="注册" class="btn btn-default btn-info btn-res">
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
<script>
  $('.btn-myBtn').on({
    click(){
      $('.myForm .form-group').removeClass('has-error');
      $('.userNode').val('');
      $('.passNode').val('');
    }
  })

  //登陆
  $('.btn-loginNode').on({
    click(){
      $.ajax({
        url:'http://localhost:9111/login/login',
        type:'get',
        data:{
          'user':$('.userNode').val(),
          'pass':$('.passNode').val()
        },
        success:function (data) {
          if(data.ok==1){
            alert(data.msg);
            $('.abc').modal('toggle');
            $('.btn-myBtn').hide();
            $('.namesNode').removeClass('hide');
            $('.namesNode span').html($('.userNode').val())

          }
          else {
            alert(data.msg);
            $('.myForm .form-group').addClass('has-error');
          }
        }
      })
    }
  })

//注册
  $('.btn-res').on({
    click(){
      $.ajax({
        url:'http://localhost:9111/login/res',
        type:'get',
        data:{
          'user':$('.userNode').val(),
          'pass':$('.passNode').val()
        },
        success:function (data) {
          if(data.ok==1){
            alert(data.msg);
            //$('.abc').modal('toggle');
          }
          else {
            alert(data.msg);
            $('.myForm .form-group').addClass('has-error');
          }
        }
      })
    }
  })
</script>
</body>
</html>